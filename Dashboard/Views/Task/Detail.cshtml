@model QuestionsSYS.ModelViews.TaskListView

@{
    ViewBag.Title = "Düzenle";
}

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Düzenle</h2>
        <ol class="breadcrumb">
            <li>
                <a href="@Url.Action("Index", "Dashboards")">Yönetim</a>
            </li>
            <li>
                <a href="@Url.Action("Index", "Task")">Görevler</a>
            </li>
            <li class="active">
                <strong><a>Düzenle</a></strong>
            </li>
        </ol>
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="ibox-content">
            <div class="sk-spinner sk-spinner-double-bounce">
                <div class="sk-double-bounce1"></div>
                <div class="sk-double-bounce2"></div>
            </div>
            @using (Ajax.BeginForm("Update", "Task", new AjaxOptions { HttpMethod = "POST", OnSuccess = "AddSuccess();", OnComplete = "OnAddComplate();", OnFailure = "AddFailed();", OnBegin = "OnAdding()" }))
            {
                <div class="form-group">
                    <label for="name">Ad Soyad</label>
                    <p>@Html.DisplayFor(modelItem => modelItem.fullname)</p>
                 
                </div>
                <div class="form-group">
                    <label for="phone">Tel</label>
                    <p> @Html.DisplayFor(modelItem => modelItem.phone) / @Html.DisplayFor(modelItem => modelItem.phone2)</p>
                </div>
                <div class="form-group">
                    <label for="question">Soru</label>
                    <p>@Html.DisplayFor(modelItem => modelItem.question)</p>
                </div>
                <div class="form-group">
                    <label>Soru Notu</label>
                    <p>@Html.DisplayFor(modelItem => modelItem.question_note)</p>
                </div>
                <div class="form-group">
                    <label for="question">Görev Notu</label>
                    <textarea placeholder="Not" name="note" id="note" class="form-control" cols="3" rows="3">
@Html.DisplayFor(modelItem => modelItem.note)
                    </textarea>
                </div>
                <div class="form-group">
                    <label for="source">Kaynak</label>
                    <br />
                    <select name="source" id="source" class="source_select form-control">
                        <option></option>
                        @foreach (var item in ViewBag.soruces)
                        {
                            <option @(Html.DisplayFor(modelItem => modelItem.source).ToString() == item.name ? "selected" : String.Empty) value="@item.name">@item.name</option>
                        }
                    </select>
                </div>
                <div class="form-group">
                    <label for="source">Sipariş Durumu</label>
                    <br />
                    <select name="state" id="state" class="state_select form-control">
                        <option></option>                       
                        <option @((Model.state) == true ? "selected" : String.Empty) value="true">Alındı</option>
                        <option @((Model.state) == false ? "selected" : String.Empty) value="false">Alınmadı</option>
                    </select>
                </div>


                <div class="form-group">
                    <label for="order_price">Sipariş Tutarı</label>
                    <input type="text" placeholder="Sipariş Tutarı" name="order_price" id="order_price" value="@Html.DisplayFor(modelItem => modelItem.order_price)" class="form-control">
                </div>

                <div class="form-group">
                    <label for="order_unit">Sipariş Adedi</label>
                    <input type="number"  placeholder="Sipariş Adedi" name="order_unit" id="order_unit" value="@Html.DisplayFor(modelItem => modelItem.order_unit)" class="form-control">
                </div>

                <div class="form-group">
                    <label for="order_unit">Teklif Fiyatı</label>
                    <input type="text" placeholder="Teklif Fiyat" name="offer_price" id="offer_price" value="@Html.DisplayFor(modelItem => modelItem.offer_price)" class="form-control">
                </div>

                <div class="form-group" id="feedback_date">
                    <label for="feedback_date">Geri Dönüşüm Tarihi</label>
                    <div class="input-group date">
                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input type="text" name="feedback_date" id="feedback_date"  value="@Html.DisplayFor(modelItem => modelItem.feedback_date)" class="form-control" value="">
                    </div>
                </div>

                <button class="btn  btn-primary no-margins" type="submit">Tamam</button>
            }
        </div>
    </div>
</div>

@section Styles{
    @Styles.Render("~/plugins/toastrStyles")
    @Styles.Render("~/plugins/select2Styles")
    @Styles.Render("~/plugins/jasnyBootstrapStyles")
    @Styles.Render("~/plugins/dataPickerStyles")
    @Styles.Render("~/plugins/dateRangeStyles")
}
@section Scripts{
    @Scripts.Render("~/plugins/toastr")
    @Scripts.Render("~/plugins/select2")
    @Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js");
    @Scripts.Render("~/plugins/jasnyBootstrap")
    @Scripts.Render("~/plugins/dataPicker")
    @Scripts.Render("~/plugins/dateRange")
    <script type="text/javascript">

        $('#feedback_date .input-group.date').datepicker({
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            calendarWeeks: true,
            autoclose: true
        });


        function AddSuccess() {
            toastr.success("Soru eklendi.", "Tamam");
            document.getElementById("form0").reset();
        }
        function AddFailed() {
            toastr.error("Numara kullanılıyor veya bir hata oluştu tekrar deneyin.", "Hata")
        }

        function OnAdding() {
            $('.ibox-content').toggleClass('sk-loading');
        }

        function OnAddComplate() {
            $('.ibox-content').toggleClass('sk-loading');
        }

        $(".source_select").select2({
            placeholder: "Kaynak",
            allowClear: true
        });
        $(".state_select").select2({
            placeholder: "Sipariş Durumu",
            allowClear: true
        });

    </script>
}